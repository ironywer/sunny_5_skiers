## Описание

Консольное приложение-прототип для обработки результатов соревнований по биатлону.
Всё происходит в несколько этапов:

1. Чтение JSON-конфигурации (количество кругов, дистанции, интервалы старта и т.п.).
2. Парсинг входного файла со временными метками и событиями (регистрация, старт, стрельба, штрафы, финиш).
3. Заполнение информации для каждого участника с генерацией исходящих событий (дисквалификация, финиш).
4. Формирование итогового табличного отчёта и логирование полного хода гонки.

## Требования

* Go 1.20 или новее
* (опционально) Docker, если вы предпочитаете запускать тесты и приложение в контейнере

## Установка и сборка

1. Клонируйте репозиторий и перейдите в корень проекта:

   ```bash
   git clone https://github.com/ironywer/sunny_5_skiers.git
   cd sunny_5_skiers
   ```
2. Подтяните зависимости:

   ```bash
   go mod tidy
   ```
3. Соберите исполняемый файл:

   ```bash
   go build -o biathlon ./main
   ```

## Конфигурационный файл (config.json)

Пример:

```json
{
  "laps": 2,
  "lapLen": 3651,
  "penaltyLen": 50,
  "firingLines": 1,
  "start": "09:30:00.000",
  "startDelta": "00:00:30.000"
}
```

* **laps** — число кругов
* **lapLen** — длина круга (м)
* **penaltyLen** — длина штрафного круга (м)
* **firingLines** — число огневых рубежей за круг
* **start** — плановое время старта первого участника
* **startDelta** — интервал между стартами

## Входной файл событий (events.txt)

Каждая строка — отдельное событие в формате

```
[HH:MM:SS.sss] EventID CompetitorID [ExtraParams]
```

Пример:

```
[09:05:59.867] 1 1
[09:15:00.841] 2 1 09:30:00.000
[09:29:45.734] 3 1
[09:30:01.005] 4 1
[09:49:31.659] 5 1 1
[09:49:33.123] 6 1 1
[09:49:34.650] 6 1 2
[09:49:35.937] 6 1 4
[09:49:37.364] 6 1 5
[09:49:38.339] 7 1
[09:49:55.915] 8 1
[09:51:48.391] 9 1
[09:59:03.872] 10 1
[09:59:03.872] 11 1 Lost in the forest
```

* EventID 1…11 — коды входящих событий (зарегистрирован, стартовал, мишень и т.д.)
* ExtraParams используется для времени старта (EventID 2) или текста комментария (ID 11)

## Запуск

```bash
./biathlon config.json events.txt
```

* В консоли появится итоговый отчёт:

  ```
  [NotFinished] 1 [{00:29:03.872, 2.093}, {,}] {00:01:44.296, 0.481} 4/5
  ```
* Полный лог входящих и исходящих событий сохранится в файле `events.log`

## Логи и отчёт

* **events.log** — хронологический вывод всех событий (входящих и сгенерированных)
* Консольный вывод — финальная таблица по каждому участнику:

  * Статус (`NotStarted`/`NotFinished` или общее время)
  * Время и скорость каждого круга
  * Время и скорость штрафных кругов
  * Попадания/выстрелы

## Юнит-тесты

Запустить все тесты и получить покрытие(под Windows может работать некорректно, смотреть Docker):

```bash
go test ./... -v -cover
```

## Docker (опционально)

Если вы предпочитаете контейнерный подход, можно воспользоваться готовым `Dockerfile` и `docker-compose.yml`. Используется образ `alpine`(linux):

```bash
docker compose up --build
```

— это автоматически соберёт образ на Go 1.20, запустит все тесты с покрытием и выведет результат в консоль.
